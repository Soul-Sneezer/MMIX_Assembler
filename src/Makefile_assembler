# Compiler and flags
CC = gcc
CFLAGS = -Wall -g -MMD
CPPFLAGS =

# Target executable
TARGET = mmix_assembler

# Source files
SRCS = main.c debug.c parser.c scanner.c table.c trie.c common.c

# Object files and dependency files
OBJS = $(SRCS:.c=.o)
DEPS = $(SRCS:.c=.d)

# Default target
all: $(TARGET)

# Linking step: create the executable from object files
$(TARGET): $(OBJS)
	$(CC) $(OBJS) -o $(TARGET)

# Compilation step: create object files and generate dependencies
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# Include dependency files generated by -MMD
-include $(DEPS)

# Clean up build artifacts
clean:
	rm -f $(OBJS) $(DEPS) $(TARGET)

# Optional: force a rebuild
rebuild: clean all

